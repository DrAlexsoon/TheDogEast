
此模型中定义了应用程序（Application，简称AP
全局事务管理器（Transaction Manager，简称TM）
本地资源管理器（Resource Manager,简称RM）
XA协议主要定义了TM和RM之间的接口规范。XA接口是双向接口，通过XA协议可以在TM与一个或多个RM之间建立通信桥梁
#优点
- 对业务无入侵
#缺点
- 同步阻塞:二段提交所有节点阻塞
- 单点问题: 协调者在提交阶段出现问题，其他参与者将会处于一直锁定事务资源的状态中，而无法继续完成事务操
- 数据不一致：
    协调者向所有的参与者发送commit请求之后，发生了局部网络异常，或者是协调者在尚未发送完所有 commit请求之前自身发生了崩溃
    只有部分参与者收到commit，导致数据不一致
- 容错性
    二阶段提交协议没有设计较为完善的容错机制，任意一个节点是失败都会导致整个事务的失败。

开启XA全局事务后，所有子事务会按照本地默认的隔离级别锁定资源，并记录undo和redo日志，然后由TM发起prepare投票，询问所有的子事务是否可以进行提交：当所有子事务反馈的结果为“yes”时，TM再发起commit；若其中任何一个子事务反馈的结果为“no”，TM则发起rollback；如果在prepare阶段的反馈结果为yes，而commit的过程中出现宕机等异常时，则在节点服务重启后，可根据XA recover再次进行commit补偿，以保证数据的一致性。